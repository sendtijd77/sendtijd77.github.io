<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirect..</title>
    <script>
        // Configuratie voor antibot gevoeligheid
        const antibotConfig = {
            logDetails: true, // Log verdachte gebruikers
            redirectBots: true, // Redirect bots naar whitepage
            showNeutralPage: false, // Toon neutrale inhoud aan verdachte gebruikers
            whitePage: "https://badbotstraffic-to.here/",
            trustedDelay: 1000, // Tijd in ms voor vertraging bij legitiem verkeer
            botKeywords: [
                "bot", "crawl", "spider", "mediapartners", "slurp", "wget", "curl",
                "python", "java", "fetch", "libwww", "urllib", "node-fetch", "headless"
            ]
        };

        // Functie: Haal een queryparameter op uit de URL
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        // Functie: Dynamische redirect gebaseerd op 'id'
        function redirectBasedOnId() {
            const id = getQueryParam("id");
            const redirectMap = {
                "123": "https://youtube.com",
                "456": "https://google.com",
                "789": "https://facebook.com"
            };

            if (id && redirectMap[id]) {
                window.location.href = redirectMap[id];
                return true; // Redirect uitgevoerd
            }

            return false; // Geen redirect uitgevoerd
        }

        // Functie: Antibotdetectie
        function detectBot() {
            const { botKeywords } = antibotConfig;
            const userAgent = navigator.userAgent || "";

            // Controleer op verdachte User-Agent keywords
            for (const keyword of botKeywords) {
                if (userAgent.toLowerCase().includes(keyword)) {
                    console.log("Suspicious User-Agent detected:", userAgent);
                    return true;
                }
            }

            // Headless browser detectie via navigator.webdriver
            if (navigator.webdriver) {
                console.log("Headless browser detected.");
                return true;
            }

            return false; // Verkeer wordt als legitiem beschouwd
        }

        // Functie: Toon neutrale inhoud
        function showNeutralContent() {
            document.body.innerHTML = `
                <h1>Welcome</h1>
                <p>This is a neutral page shown to suspected bots.</p>
            `;
        }

        // Hoofdfunctie
        function init() {
            if (detectBot()) {
                if (antibotConfig.redirectBots) {
                    window.location.href = antibotConfig.whitePage;
                } else if (antibotConfig.showNeutralPage) {
                    showNeutralContent();
                }
                return; // Bot gedetecteerd, stop verdere verwerking
            }

            const redirected = redirectBasedOnId();
            if (!redirected) {
                document.body.innerHTML = `
                    <h1>Antibot & Cloaking System Active</h1>
                    <p>No valid redirect found for the provided 'id'.</p>
                `;
            }
        }

        // Script starten
        window.onload = init;
    </script>
</head>
<body>
</body>
</html>
